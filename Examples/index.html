<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="Page with examples for the NJQ plugin by Stefano Vazzoler">
		<meta name="author" content="Stefano Vazzoler">
		<title>NJQ ($$) - Examples</title>
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<main>
			<h2>NJQ - Test Page</h2>
			<i>NoJQuery by Stefano Vazzoler (<a href="mailto:stefanovazzocell@gmail.com">stefanovazzocell@gmail.com</a>)</i>
			<p>
				In this page will show sample code for the NJQ Library.
			</p>
			<p>
				Checks: <i style="color: #800">RED</i> is failing, <i style="color: #080">GREEN</i> is passing, and <i>BLACK</i> indicates that no automatic test was performed.
			</p>
			<ul>
				<li class="c_ready">ready(callback) <a class="nu" href="#f_ready">|></a></li>
				<li class="c_each">each(fn) <a class="nu" href="#f_each">|></a></li>
				<li class="c_log">log() <a class="nu" href="#f_log">|></a></li>
			</ul>
			<h4>Selecting element(s)</h4>
			<p>
				Here are some examples of how an element can be selected
			</p>
			<div class="code">
				<p class="c cc">// Select by element</p>
				<p class="c">$$('html').html();</p>
				<p class="c cc">// Select by id</p>
				<p class="c">$$('#id').html();</p>
				<p class="c cc">// Select by class</p>
				<p class="c">$$('.class').html();</p>
				<p class="c cc">// Select by reference</p>
				<p class="c">$$(this).html();</p>
			</div>
			<h4>Page Ready</h4>
			<p>
				<b id="f_ready" class="c_ready">ready(callback)</b> calls the callback when the page is done loading.
			</p>
			<div class="code">
				<p class="c cc">// Show a message when the page is loaded</p>
				<p class="c">$$().ready(function(){</p>
				<p class="c">	alert('The page is loaded!');</p>
				<p class="c">});</p>
			</div>
			<h4>For Each</h4>
			<p>
				<b id="f_each" class="c_each">each(fn)</b> calls a function on every selected element.<br>
				The function should have two parameters:<br>
				<ol>
					<li>element - is the current selected element</li>
					<li>index - is the index of the current element</li>
				</ol>
			</p>
			<div class="code">
				<p class="c cc">// Log a message for every 'p' element</p>
				<p class="c">$$('p').each(function(element, index){</p>
				<p class="c">	console.log(index + ' - A paragraph element!');</p>
				<p class="c">});</p>
			</div>
			<h4>Log all</h4>
			<p>
				<b id="f_log" class="noCheck c_log">log()</b> prints every element that is currently selected on the console
			</p>
			<div class="code">
				<p class="c cc">// Select every 'div' element and log it on the console</p>
				<p class="c">$$('div').log();</p>
			</div>
			<!-- HIDDEN ELEMENTS FOR TESTING -->
			<div class="test test_each_a okay"></div>
			<div class="test test_each_a okay"></div>
			<div class="test test_each_a okay"></div>
			<div class="test test_each_b okay"></div>
			<!--------------------------------->
		</main>
		<script src="../Source/njq.js"></script>
		<script type="text/javascript">
			/*
			*  Helpers
			*/
			// Changes color by class
			function passing(testName) {
				var toChange = document.getElementsByClassName('c_' + testName);
				for (var i = toChange.length - 1; i >= 0; i--) {
					toChange[i].style.color = '#080';
				}
			}
			function isValid(element) {
				return ((' ' + element.className + ' ').replace(/[\n\t]/g, ' ').indexOf(' okay ') > -1);
			}
			function test(name, fn) {
				try {
					fn(name);
				} catch(error) {
					console.warn('Call to ' + name + ' throwed error:');
					console.error(error);
				}
			}
			/*
			* Tests
			*/
			// > ready(callback)
			test('ready', function(name) {
				$$().ready(function() {
					passing(name);
				});
			});
			// > each(fn)
			test('each', function(name) {
				var counter_a = 0;
				var counter_b = 0;
				var counter_c = 0;
				$$('.test_each_a').each(function(element, index) {
					if (isValid(element)) {
						counter_a++;
					}
				});
				$$('.test_each_b').each(function(element, index) {
					if (isValid(element)) {
						counter_b++;
					}
				});
				$$('.test_each_c').each(function(element, index) {
					if (isValid(element)) {
						counter_c++;
					}
				});
				if (counter_a == 3 && counter_b == 1 && counter_c == 0) {
					passing(name);
				} else throw 'Incorrect counters value: A is ' + counter_a + ' expects 3, B is ' + counter_b  + ' expects 1, C is ' + counter_c + ' expects 0';
			});
		</script>
	</body>
</html>